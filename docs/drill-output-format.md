# Output format reference

This reference documents the structure of all output files generated by hix-drill.

## Facts format (.hixdrill/facts.json)

Facts represent language-agnostic code structure extracted from source files.

### Structure

```json
{
  "files": [
    {
      "path": "./Person.cs",
      "language": "csharp",
      "hash": "abc123..."
    }
  ],
  "symbols": [
    {
      "id": "sym_0",
      "kind": "type",
      "name": "Person",
      "file": "./Person.cs",
      "range": {
        "start_line": 2,
        "start_column": 4,
        "end_line": 7,
        "end_column": 5
      }
    }
  ],
  "members": [
    {
      "symbol_id": "sym_0",
      "name": "Name",
      "kind": "field",
      "type_ref": "string",
      "range": { ... }
    }
  ],
  "relations": [
    {
      "from_id": "sym_1",
      "rel_kind": "imports",
      "to_ref": "System.Collections"
    }
  ],
  "annotations": [
    {
      "symbol_id": "sym_2",
      "key": "Route",
      "value": "/api/users",
      "range": { ... }
    }
  ]
}
```

### Symbol kinds

- `type`: Classes, interfaces, types
- `function`: Functions, methods
- `variable`: Variables, constants

### Member kinds

- `property`: Properties, getters/setters
- `method`: Methods, functions
- `field`: Fields, attributes

### Relation kinds

- `imports`: Import/using statements
- `calls`: Function/method calls
- `extends`: Inheritance
- `implements`: Interface implementation

## Matches format (.hixdrill/matches.json)

Pattern match results with bindings.

### Structure

```json
{
  "instances": [
    {
      "pattern_name": "data-structure",
      "symbol_id": "sym_0",
      "symbol_name": "Person",
      "file": "./Person.cs",
      "bindings": {
        "type_name": "Person",
        "fields": ["Name", "Age"]
      }
    }
  ]
}
```

### Instance fields

- `pattern_name`: Name of the matched pattern
- `symbol_id`: ID of the matched symbol
- `symbol_name`: Name of the matched symbol
- `file`: Source file path
- `bindings`: Pattern-specific bindings (varies by pattern)

## Report format (.hixdrill/report.json)

Machine-readable analysis report.

### Structure

```json
{
  "summary": {
    "total_files": 10,
    "parsed_files": 8,
    "failed_files": 0,
    "no_parser_files": 2,
    "total_symbols": 25,
    "total_matches": 5,
    "unique_patterns": 2
  },
  "packs": [
    {
      "name": "data-structures",
      "version": "1.0.0",
      "description": "Patterns for DTO-like structures",
      "pattern_count": 2
    }
  ],
  "matches_by_pattern": {
    "data-structure": {
      "pattern_name": "data-structure",
      "count": 3,
      "matched_symbol_ids": ["sym_0", "sym_1", "sym_2"],
      "samples": [
        {
          "symbol_id": "sym_0",
          "symbol_name": "Person",
          "file": "./Person.cs"
        }
      ]
    }
  },
  "coverage": {
    "matched_symbols": 5,
    "unmatched_symbols": 20,
    "symbol_coverage_percent": 20.0
  },
  "unknowns": {
    "total_unmatched": 20,
    "by_kind": {
      "function": 10,
      "type": 5,
      "variable": 5
    },
    "samples": [
      {
        "symbol_id": "sym_10",
        "symbol_name": "Helper",
        "symbol_kind": "function",
        "file": "./Helper.cs"
      }
    ]
  }
}
```

### Summary fields

- `total_files`: Total files scanned
- `parsed_files`: Successfully parsed files
- `failed_files`: Files with parse errors
- `no_parser_files`: Files without parser support
- `total_symbols`: Total symbols extracted
- `total_matches`: Total pattern matches
- `unique_patterns`: Number of unique patterns matched

### Coverage metrics

- `matched_symbols`: Symbols matched by patterns
- `unmatched_symbols`: Symbols not matched
- `symbol_coverage_percent`: Percentage of symbols matched

## Project config format (.hix/drill/project.json)

Hix project configuration generated by `init` command.

### Structure

```json
{
  "packs_used": [
    {
      "name": "data-structures",
      "version": "1.0.0",
      "path": "../packs/data-structures"
    }
  ],
  "pattern_mappings": [
    {
      "pattern": "data-structure",
      "instances": [
        {
          "symbol_id": "sym_0",
          "symbol_name": "Person",
          "source_file": "./Person.cs",
          "model_file": ".hix/models/Person.json",
          "template_file": ".hix/templates/data-structure.hix"
        }
      ]
    }
  ],
  "hix_config": ".hix/config.yaml"
}
```

### Pack info

- `name`: Pack name
- `version`: Pack version
- `path`: Relative path to pack directory

### Pattern instance

- `symbol_id`: Matched symbol ID
- `symbol_name`: Matched symbol name
- `source_file`: Source file path (relative to project root)
- `model_file`: Model file path (placeholder)
- `template_file`: Template file path (placeholder)

## Report Markdown format (.hixdrill/report.md)

Human-readable analysis report in Markdown format.

### Sections

1. **Summary**: Overview statistics
2. **Pattern Packs**: List of packs used
3. **Pattern Matches**: Details per pattern
4. **Coverage**: Coverage metrics and charts
5. **Unknown Symbols**: Unmatched symbols by kind

### Example

```markdown
# hix-drill Analysis Report

## Summary

- Total files: 10
- Parsed: 8
- Symbols: 25
- Matches: 5
- Coverage: 20.0%

## Pattern Packs

- data-structures v1.0.0

## Pattern Matches

### data-structure (3 matches)

- Person (./Person.cs)
- User (./User.cs)
- Product (./Product.cs)

## Coverage

- Matched: 5 symbols (20.0%)
- Unmatched: 20 symbols (80.0%)

## Unknown Symbols

### Functions (10)
- Helper (./Helper.cs)
- ...
```

## File locations

All output files are created relative to the analyzed repository:

- `.hixdrill/facts.json`: Extracted facts
- `.hixdrill/matches.json`: Pattern matches
- `.hixdrill/report.json`: Machine-readable report
- `.hixdrill/report.md`: Human-readable report
- `.hix/drill/project.json`: Hix project config

## Next steps

- [Learn about Pattern Packs](drill-pattern-packs.md)
- [View usage examples](drill-examples.md)
- [Understand the analysis process](drill-overview.md)

